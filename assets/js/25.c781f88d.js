(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{242:function(v,_,e){"use strict";e.r(_);var o=e(19),t=Object(o.a)({},(function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("h1",{attrs:{id:"方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#方案"}},[v._v("#")]),v._v(" 方案")]),v._v(" "),e("p",[v._v("Vue Router Tab 实现过程中遇到的"),e("strong",[v._v("问题及解决方案")]),v._v("，也欢迎提出更好的点子。")]),v._v(" "),e("ol",[e("li",[e("p",[e("code",[v._v("keep-alive")]),v._v(" 仅支持根据组件 "),e("code",[v._v("name")]),v._v(" 控制缓存，无法针对路由精确控制：")]),v._v(" "),e("p",[v._v("参考 "),e("code",[v._v("keep-alive")]),v._v(" 实现 "),e("code",[v._v("router-alive")]),v._v(" 组件，基于 Vue Router 路由规则的缓存控制")])]),v._v(" "),e("li",[e("p",[v._v("页面组件强制刷新：")]),v._v(" "),e("ol",[e("li",[v._v("销毁页面组件实例")]),v._v(" "),e("li",[e("code",[v._v("router-view")]),v._v(" 组件通过 "),e("code",[v._v("v-if")]),v._v(" 隐藏，在 "),e("code",[v._v("nextTick")]),v._v(" 后再显示")])])]),v._v(" "),e("li",[e("p",[v._v("由于缓存，Webpack 热加载后的页面不刷新：")]),v._v(" "),e("p",[v._v("在路由页面组件全局混入的 "),e("code",[v._v("activated")]),v._v(" 钩子里，记录 "),e("code",[v._v("vm.$vnode.componentOptions.Ctor.cid")]),v._v("。如果与上一次的值不一致，则销毁页面，组件重新渲染")])]),v._v(" "),e("li",[e("p",[v._v("当快速频繁切换页签时，页面显示空白：")]),v._v(" "),e("p",[v._v("根因：旧页面离开的过渡效果尚未完成，新页面内容来不及 mount 又被后面的路由替换")]),v._v(" "),e("p",[v._v("方案：路由切换结束后，如果路由页面节点 "),e("code",[v._v("nodeType")]),v._v(" 为 8 (comment 类型)，强制刷新页面组件")])]),v._v(" "),e("li",[e("p",[v._v("iframe 页面页签切换后会重新加载：")]),v._v(" "),e("ol",[e("li",[e("p",[v._v("将  "),e("code",[v._v("<iframe>")]),v._v(" 节点放在页面所在 "),e("code",[v._v("<router-view>")]),v._v(" 的外层，通过 "),e("code",[v._v("v-show")]),v._v(" 控制显示隐藏。")])]),v._v(" "),e("li",[e("p",[v._v("建立 iframe 路由页面组件，通过生命周期钩子来添加、显示、隐藏、移除 "),e("code",[v._v("<iframe>")]),v._v(" dom 节点")])])])]),v._v(" "),e("li",[e("p",[v._v("打包后的 js 文件太庞大：")]),v._v(" "),e("p",[v._v("构建库时，配置 "),e("code",[v._v("babel.config.js")]),v._v(" 中 "),e("code",[v._v("useBuiltIns")]),v._v(" 为 "),e("code",[v._v("false")]),v._v("，打包时不包含 Polyfill")])])])])}),[],!1,null,null,null);_.default=t.exports}}]);